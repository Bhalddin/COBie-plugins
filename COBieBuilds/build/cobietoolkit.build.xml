<project name="COBie Toolkit">
	<import file="common.build.xml"/>
	<target name="Build COBieToolkitJar">
		<property name="target" value="cobietoolkitjar"/>
		<delete dir="builds"/>
		<mkdir dir="builds" />
		<copy todir="builds/BuildJar">
			<fileset file="${buildtargets}/shared/license.txt" />
		</copy>
		<mkdir dir="builds/lib" />
		<mkdir dir="builds/pluginlibs" />
		<antcall target="Utils"/>
		<antcall target="Emf"/>
		<antcall target="Shared"/>
		<antcall target="Ifc"/>
		<antcall target="BimServerClientLib"/>
		<!--<antcall target="BimServer"/>-->
		<antcall target="MiscSerializers" />
		<antcall target="buildingSMARTLibrary" />
		
		<!--<antcall target="FileBasedObjectIDM" />-->
		<antcall target="COBieShared"/>		
		<antcall target="IfcPlugins"/>
	<!--	<antcall target="IfcPluginsLib"/> -->
		<antcall target="COBiePlugins_Public"/>	
		<!--<antcall target="COBiePlugins_Public_PluginLib"/>	-->
		<antcall target="COBieToolkit"/>
		<javac destdir="builds/BuildJar" debug="on" srcdir="../../COBieToolkit/expander"  includeantruntime="false"/>
<!--		<copy todir="builds/BuildJar/lib" flatten="true">
			<fileset dir="../../BimServer/lib">

				
			</fileset>
		</copy> -->
		<copy todir="builds/BuildJar/lib" flatten="true">
					<fileset dir="../../BimServer/lib/logging"/>
						

			<fileset dir="../../BimServer/lib/commons"/>
										<fileset dir="../../BimServer/lib/cxf/"/>
											<fileset dir="../../BimServer/lib/emf"/>
												<fileset file="../../BimServer/lib/guava-13.0.1.jar"/>
			</copy>
		<copy todir="builds/BuildJar/lib">
			<fileset dir="builds/lib" />
		</copy>
		<copy todir="builds/BuildJar/plugins">
			<fileset dir="builds/pluginlibs" />
		</copy>

	<copy todir="builds/BuildJar/lib">
			<fileset dir="builds/cobietoolkit/lib" />
		</copy>
		<copy todir="builds/BuildJar/lib">
			<fileset dir="builds/cobieshared/lib" />
		</copy>
		<copy todir="builds/BuildJar/lib">
			<fileset dir="builds/cobieplugins_public/lib" />
		</copy>
		<copy todir="builds/BuildJar/org/erdc/cobie">
			<fileset dir="../../COBieToolkit/expander/org/erdc/cobie">
				<include name="*.png" />
			</fileset>
		</copy>
		<!--<copy todir="builds/BuildJar/org/bimserver">
			<fileset dir="../../COBieToolkit/expander/org/erdc/cobie">
				<include name="*.png" />
			</fileset>
		</copy>-->

		<jar jarfile="builds/bimserver-cobietoolkit-${version}.jar" manifest="${buildtargets}/${target}/MANIFEST.MF">
			<fileset dir="builds/BuildJar">
				<exclude name="*.svn" />
			</fileset>
		</jar>
		<delete dir="builds/BuildJar" failonerror="false" />
	</target>
</project>